<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="portal_my_home_tailor" name="Show Tailor Orders" inherit_id="portal.portal_my_home" priority="30">
            <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
                <t t-call="portal.portal_docs_entry">
                    <t t-set="title">Tailor Orders</t>
                    <t t-set="url" t-value="'/my/tailor/orders'"/>
                    <t t-set="placeholder_count" t-value="'tailor_order_count'"/>
                </t>
            </xpath>
        </template>

        <template id="portal_my_home_menu_tailor" name="Portal layout : tailor menu entries" inherit_id="portal.portal_breadcrumbs" priority="30">
            <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
                <li t-if="page_name == 'tailor_orders' or page_name == 'tailor_order'" t-attf-class="breadcrumb-item #{'active' if not order else ''}">
                    <a t-if="order" t-attf-href="/my/tailor/orders">Tailor Orders</a>
                    <t t-else="">Tailor Orders</t>
                </li>
                <li t-if="order" class="breadcrumb-item active">
                    <t t-esc="order.name"/>
                </li>
            </xpath>
        </template>

        <template id="portal_my_tailor_orders" name="My Tailor Orders">
            <t t-call="portal.portal_layout">
                <t t-set="breadcrumbs_searchbar" t-value="True"/>
                <t t-call="portal.portal_searchbar">
                    <t t-set="title">Tailor Orders</t>
                </t>

                <t t-if="not orders">
                    <div class="alert alert-warning">
                        There are currently no orders for your account.
                    </div>
                </t>

                <div t-if="orders" class="table-responsive bg-white">
                    <table class="table table-hover">
                        <thead class="thead-light">
                            <tr>
                                <th>Reference</th>
                                <th>Date</th>
                                <th>Garment</th>
                                <th>Status</th>
                                <th class="text-end">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="orders" t-as="order">
                                <tr>
                                    <td>
                                        <a t-attf-href="/my/tailor/orders/#{order.id}">
                                            <t t-esc="order.name"/>
                                        </a>
                                    </td>
                                    <td><span t-field="order.order_date" t-options='{"widget": "date"}'/></td>
                                    <td><span t-field="order.garment_type"/></td>
                                    <td>
                                        <span t-if="order.status == 'ready'" class="badge rounded-pill text-bg-success">Ready</span>
                                        <span t-elif="order.status in ['cutting', 'sewing']" class="badge rounded-pill text-bg-warning">In Progress</span>
                                        <span t-else="" class="badge rounded-pill text-bg-secondary"><span t-field="order.status"/></span>
                                    </td>
                                    <td class="text-end">
                                        <span t-field="order.total_amount" t-options='{"widget": "monetary", "display_currency": order.currency_id}'/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
            </t>
        </template>

        <template id="portal_my_tailor_order_detail" name="Tailor Order Detail">
            <t t-call="portal.portal_layout">
                <div class="container bg-white p-4 shadow-sm rounded mt-3">
                    <div class="row">
                        <div class="col-8">
                            <h2>Order <span t-field="order.name"/></h2>
                        </div>
                        <div class="col-4 text-end">
                            <span t-field="order.status" class="badge rounded-pill text-bg-primary" style="font-size:16px;"/>
                        </div>
                    </div>
                    <hr/>
                    <div class="row">
                        <div class="col-md-6">
                            <strong>Garment Type:</strong> <span t-field="order.garment_type"/><br/>
                            <strong>Fabric:</strong> <span t-field="order.fabric_type"/><br/>
                            <strong>Date:</strong> <span t-field="order.order_date"/>
                        </div>
                        <div class="col-md-6 text-end">
                            <strong>Total:</strong> <span t-field="order.total_amount"/><br/>
                            <strong>Balance Due:</strong> <span t-field="order.balance_due" class="text-danger fw-bold"/>
                        </div>
                    </div>

                    <h4 class="mt-4">Measurements</h4>
                    <table class="table table-bordered table-sm mt-2">
                        <tbody>
                            <tr>
                                <td><strong>Chest:</strong> <span t-field="order.chest_measurement"/></td>
                                <td><strong>Waist:</strong> <span t-field="order.waist_measurement"/></td>
                                <td><strong>Hip:</strong> <span t-field="order.hip_measurement"/></td>
                            </tr>
                            <tr>
                                <td><strong>Shoulder:</strong> <span t-field="order.shoulder_width"/></td>
                                <td><strong>Sleeve:</strong> <span t-field="order.sleeve_length"/></td>
                                <td><strong>Length:</strong> <span t-field="order.front_length"/></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </t>
        </template>
    </data>
</odoo>